var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.logException=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _Init=require("./Init");var _constants=require("../utils/constants");var _ApiCall=_interopRequireDefault(require("../utils/ApiCall"));var _asyncStorage=_interopRequireDefault(require("@react-native-async-storage/async-storage"));var _helper=require("../utils/helper");var logException=exports.logException=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(_ref){var _data$data;var message=_ref.message,_ref$maxLength=_ref.maxLength,maxLength=_ref$maxLength===void 0?-1:_ref$maxLength,_ref$exceptionObj=_ref.exceptionObj,exceptionObj=_ref$exceptionObj===void 0?{}:_ref$exceptionObj;if(_Init.data!=null&&(_data$data=_Init.data.data)!=null&&_data$data.logs_capture){try{if(maxLength>=0){message=message.substring(0,maxLength);}eventAt=yield(0,_helper.formatTimestamp)(Date.now());var logData={eventType:_constants.ZIPY_EXCEPTION,createdAt:Date.now(),message:message,exceptionObj:exceptionObj,eventAt:`${eventAt}`};var sessionid=yield _asyncStorage.default.getItem("session_id");var req_body={message:{events:logData,'eu_info_id':'N/A','eue_id':'0','euz_id':'0','ip':'','rel_ver':'N/A','timezone':'IST',key:_Init.api_key,sdk_ver:_constants.SDK_VERSION,src:_constants.SRC,src_tech_stack:_constants.TECH_STACK,s_id:`${sessionid}`,event_type:_constants.MESSAGE}};yield(0,_ApiCall.default)(logData,req_body);}catch(error){console.error(error);}}else{console.info("logs_capture is not enabled");}});return function logException(_x){return _ref2.apply(this,arguments);};}();