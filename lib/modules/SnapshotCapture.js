var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _react=_interopRequireWildcard(require("react"));var _reactNativeViewShot=_interopRequireDefault(require("react-native-view-shot"));var _axios=_interopRequireDefault(require("axios"));var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/Users/sandesh/Desktop/zipy-mobilesdk-reactnative/src/modules/SnapshotCapture.js";function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}var SnapshotCapture=(0,_react.forwardRef)(function(props,ref){var viewShotRef=_react.default.useRef(null);(0,_react.useImperativeHandle)(ref,function(){return{captureAndSendSnapshot:function(){var _captureAndSendSnapshot=(0,_asyncToGenerator2.default)(function*(){try{var uri=yield viewShotRef.current.capture();var fileName=`snapshot_${Date.now()}.jpg`;yield sendSnapshot(uri,fileName);return{uri:uri,fileName:fileName};}catch(error){console.error('Error capturing snapshot',error);return null;}});function captureAndSendSnapshot(){return _captureAndSendSnapshot.apply(this,arguments);}return captureAndSendSnapshot;}()};});var sendSnapshot=function(){var _ref=(0,_asyncToGenerator2.default)(function*(uri,fileName){var formData=new FormData();formData.append('file',{uri:uri,name:fileName,type:'image/jpeg'});try{var response=yield _axios.default.post('YOUR_SERVER_URL_HERE',formData,{headers:{'Content-Type':'multipart/form-data'}});console.log('Snapshot sent successfully',response.data);}catch(error){console.error('Error sending snapshot',error);}});return function sendSnapshot(_x,_x2){return _ref.apply(this,arguments);};}();return(0,_jsxRuntime.jsx)(_reactNativeViewShot.default,{ref:viewShotRef,options:{format:'jpg',quality:0.5},style:props.style,children:props.children});});var _default=exports.default=SnapshotCapture;