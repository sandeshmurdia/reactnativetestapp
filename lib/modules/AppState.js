var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _asyncStorage=_interopRequireDefault(require("@react-native-async-storage/async-storage"));var _helper=require("../utils/helper");var _ApiCall=_interopRequireDefault(require("../utils/ApiCall"));var _constants=require("../utils/constants");var _Init=require("./Init");var _reactNative=require("react-native");var CurrentAppState=function(){var _ref=(0,_asyncToGenerator2.default)(function*(){_reactNative.BackHandler.addEventListener('hardwareBackPress',handleBackButtonPress);_reactNative.AppState.addEventListener('change',function(appstate){AppStateChange(appstate);});var handleBackButtonPress=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(){try{eventAt=yield(0,_helper.formatTimestamp)(Date.now());var logData={eventType:_constants.SOFTKEY_BACK,createdAt:Date.now(),eventAt:`${eventAt}`};var sessionid=yield _asyncStorage.default.getItem("session_id");var req_body={message:{events:logData,'eu_info_id':'N/A','eue_id':'0','euz_id':'0','ip':'','rel_ver':'N/A','timezone':'IST',key:_Init.api_key,sdk_ver:_constants.SDK_VERSION,src:_constants.SRC,src_tech_stack:_constants.TECH_STACK,s_id:`${sessionid}`,event_type:_constants.MESSAGE}};yield(0,_ApiCall.default)(logData,req_body);}catch(error){}});return function handleBackButtonPress(){return _ref2.apply(this,arguments);};}();var AppStateChange=function(){var _ref3=(0,_asyncToGenerator2.default)(function*(appstate){var stateChange;if(appstate==="active"){stateChange=_constants.SCREEN_SHOW;}else if(appstate==="background"){stateChange=_constants.SCREEN_HIDE;}try{eventAt=yield(0,_helper.formatTimestamp)(Date.now());var logData={eventType:stateChange,createdAt:Date.now(),eventAt:`${eventAt}`};var sessionid=yield _asyncStorage.default.getItem("session_id");var req_body={message:{events:logData,'eu_info_id':'N/A','eue_id':'0','euz_id':'0','ip':'','rel_ver':'N/A','timezone':'IST',key:_Init.api_key,sdk_ver:_constants.SDK_VERSION,src:_constants.SRC,src_tech_stack:_constants.TECH_STACK,s_id:`${sessionid}`,event_type:_constants.MESSAGE}};yield(0,_ApiCall.default)(logData,req_body);}catch(error){}});return function AppStateChange(_x){return _ref3.apply(this,arguments);};}();});return function CurrentAppState(){return _ref.apply(this,arguments);};}();var _default=exports.default=CurrentAppState;