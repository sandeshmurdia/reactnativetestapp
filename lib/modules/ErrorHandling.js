var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _reactNativeExceptionHandler=require("react-native-exception-handler");var _helper=require("../utils/helper");var _ApiCall=_interopRequireDefault(require("../utils/ApiCall"));var _asyncStorage=_interopRequireDefault(require("@react-native-async-storage/async-storage"));var _constants=require("../utils/constants");var _Init=require("./Init");var ErrorHandling=function ErrorHandling(){var errorHandler=function(){var _ref=(0,_asyncToGenerator2.default)(function*(error,isFatal){if(isFatal){}else{try{var eventAt=yield(0,_helper.formatTimestamp)(Date.now());var reqData={eventType:_constants.UNHANDLED_EXCEPTION,createdAt:Date.now(),eventAt:`${eventAt}`,message:error==null?void 0:error.name,exceptionObj:{message:error==null?void 0:error.message,stack:error==null?void 0:error.stack}};var sessionid=yield _asyncStorage.default.getItem('session_id');var req_body={message:{key:_Init.api_key,sdk_ver:_constants.SDK_VERSION,src:_constants.SRC,src_tech_stack:_constants.TECH_STACK,events:reqData,'eu_info_id':'N/A','eue_id':'0','euz_id':'0','ip':'','rel_ver':'N/A','timezone':'IST',s_id:`${sessionid}`,event_type:_constants.MESSAGE}};yield(0,_ApiCall.default)(reqData,req_body);}catch(error){}}});return function errorHandler(_x,_x2){return _ref.apply(this,arguments);};}();try{(0,_reactNativeExceptionHandler.setJSExceptionHandler)(errorHandler,true);}catch(error){}};var _default=exports.default=ErrorHandling;